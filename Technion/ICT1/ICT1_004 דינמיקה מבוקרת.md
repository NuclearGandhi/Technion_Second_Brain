---
aliases:
---
# מבוא
ב[[ICT1_003 בקרה בחוג פתוח#מבוא|היפוך תהליך]] ראינו שבקר מושלם המניב $y=r$ לאות ייחוס $r$ הוא:
- לא ניתן למימוש במציאות
- עלול להיות מאוד לא יציב בגלל אי-יציבות פנימית.

נעסוק כעת באיך נוכל לדרוש $y\approx r$ במקום $y=r$.

עבור בקר בחור פתוח מהצורה:
$$y=P(d+C_{\text{ol}}r)=Pd+PC_{\text{ol}}r$$
![[{A818B90D-5146-49B1-89C7-3CFBE15A19DA}.png|bookhue|450]]
יש לתגובה שני מרכיבים בלתי תלויים:
- תגובה להפרעה $y_{d}=Pd$, שלא ניתן לשליטה ע"י הבקר $C_{\text{ol}}$.
- תגובה לייחוס $y_{r}=PC_{\text{ol}}r$ שניתן לשליטה ע"י הבקר $C_{\text{ol}}$.

נעסוק במה שאנו כן יכולים לשלוט, הדינמיקה המבוקרת
$$T_{yr}=PC_{\text{ol}}$$
והתגובות מצב מתמיד (steady-state) ומעבר (transient) שלו.

# תגובה במצב מתמיד
יהי $y=T_{yr}r$ ל-$T_{yr}$ יציבה. נרצה למצוא את $e=r-y$ במצב מתמיד. במקרה והאות ייחוס שלנו הוא מהצורה
$$r(t)=\sin(\omega t+\phi)\mathbb{1}(t)$$
אז השגיאה שלנו תהיה
$$e_{\text{ss}}=\lvert 1-T_{yr} \rvert$$
כי התגובה במצב מתמיד של אות מדרגה תואם ל-$\omega=0$ ([[LSY1_009 Frequency Domain Analysis#Bode Diagram|תזכורת]]).
במילים אחרות, השגיאה שווה לגודל של התגובת תדירות של $S_{yr}:=1-T_{yr}$.
נאמר שהשגיאה "קטנה" אם:
$$e_{\text{ss}}\ll 1\implies \lvert S_{yr}(j\omega) \rvert\ll 1$$
במקרים מסוימים יהיה יותר נוח לחשוב על טענה זאת כ
$$T_{yr}(j\omega)\approx 1$$
כי $\lvert T_{yr}(j\omega) \rvert\approx1$ ו- $\arg T_{yr}(j\omega)\approx0$.
מאחר ו- $T_{yr}=PC_{\text{ol}}$, אז במידה והאות ייחוס שלנו $r(t)$ הוא תנודתי עם תדירות $\omega$, כדי לקבל את $r(t)$ במצב מתמיד מספיק לנו לדרוש:
$$C_{\text{ol}}(j\omega)=\dfrac{1}{P(j\omega)}$$
שזה לא אותו הדבר כמו לדרוש $C_{\text{ol}}(s)=\dfrac{1}{P(s)}$ - זה דרישה הרבה יותר חלשה! אנחנו בעצם מבצעים כאן היפוך תהליך רק בתדירות מסוימת. אם נרצה עוד תדירויות, נוכל פשוט להוסיף את הדרישות לתדירויות האלה בנוסף.

>[!notes] הערה: 
 >אם אנו עובדים במערכות עם פרמטרים ממשיים, אז לדרישה $C_{\text{ol}}(j\omega)=1/P(j\omega)$ נצטרף להוסיף את הדרישה הצמודה $C_{\text{ol}}(-j\omega)=1/P(-j\omega)$.
 

>[!example] דוגמה: 
> 
> אם $\omega=0$, כלומר $r=\mathbb{1}$, אז:
> $$C_{\text{ol}}(0)=\dfrac{1}{P(0)}$$
> מה שאומר שאנו צריכים לקבוע את ההגברה הסטטית $k_{\text{st}}$ הנכון לבקר. למשל במקרה של מערכת מסה-גלגלת עם ריסון וקפיץ:
> ![[{E08B23F2-66CC-46F2-84D5-9EB8ABAFC158}.png|bookhue|200]]
> נבחר
> $$C_{\text{ol}}=\dfrac{1}{\rho} \dfrac{1}{\tau s+1}$$
> כי ההגברה הסטטית של מערכת זו היא $k_{\text{st}}=\rho$. הבקר הבא
> ![[Screenshot_20241201_132023_Samsung Notes.jpg|bookhue|500]]
> הופך את $P(0)=\rho$, כך ש- $e_{\text{ss}}=0$:
> ![[Screenshot_20241201_132119_Samsung Notes.jpg|bookhue|500]]
> 
> ברור שהתגובת מעבר (transient response) היא לא מה שרצינו, אנחנו בכלל רצינו פונקציית מדרגה, אבל כן ענינו על הדרישה במצב מתמיד, ועוד יש לנו דרגת חופש עם $\tau$!
> 
> אם כעת $r(t)=\sin(\omega t+\phi)\mathbb{1}(t)$, אז $e_{\text{ss}}=0$ אמ"ם:
> $$C_{\text{ol}}(j\omega)=\dfrac{1}{P(j\omega)} \qquad \text{and} \qquad C_{\text{ol}}(-j\omega)=\dfrac{1}{P(-j\omega)}$$
> נוכל לענות על דרישות אלו אם לכל $\tau>0$:
> $$C_{\text{ol}}(s)=\dfrac{{b}_{1}s+{b}_{0}}{\tau s+1}$$
> ונמצא את ${b}_{0}$ ו-${b}_{1}$ ע"י הצבה בדרישות:
> $${b}_{0}\pm {b}_{1}j\omega=(1\pm j\tau\omega)/P(\pm j\omega)$$
> נוכל לייצג זאת מטריצית:
> $$\begin{pmatrix}
> 1 & j\omega \\
> 1 & -j\omega
> \end{pmatrix}\begin{pmatrix}
> {b}_{0} \\
> {b}_{1}
> \end{pmatrix}\begin{pmatrix}
> (1+j\tau\omega)/P(j\omega) \\
> (1-j\tau\omega)/P(-j\omega)
> \end{pmatrix}$$
> שניתנת לפתרון לכל $\omega \neq 0$.
> במידה ו- $\omega=4$, לכל $\tau>0$, הבקר ב
> ![[Screenshot_20241201_132853_Samsung Notes.jpg|bookhue|450]]
> הופך את $P(\pm 4j)$ כך ש- $e_{\text{ss}}=0$:
> ![[Screenshot_20241201_133006_Samsung Notes.jpg|bookhue|500]]
> 

# ניתוח מודלי
נרצה לאפיין מערכות באופן איכותי ע"י מבט פשוט באפסים/קטבים שלהם. במקרים של מערכות מסדר ראשון או שני אנו מכירים כבר איך עושים זאת עם דיאגרמות בודה, אבל נביט קצת יותר לעומק בקטבים והאפסים ופרמטרים אחרים העלולים לעזור לנו בעזרת מה שנקרא **ניתוח מודלי (modal analysis)**.

## ניתוח מערכות מסדר ראשון ושני

במקרה של מערכת מסדר ראשון:
$$G(s)=\dfrac{k_{\text{st}}}{\tau s+1}$$
יש לה קוטב אחד ממשי ב:
$$s=-\dfrac{1}{\tau}:=-\lambda _{r}$$
כאשר $\lambda_{r}=0$ הוא החלק הממשי של הקוטב. לכן:
![[Screenshot_20241201_133558_Samsung Notes.jpg|bookhue|500]]
>תגובת מדרגה של מערכת מסדר ראשון. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

נשים לב שככל ש- $\lambda_{r}$ גדול יותר, התגובת מעבר מהירה יותר.

עבור מערכת מסדר שני *תת מרוסנת* עם פונקציית תמסורת מהצורה:
$$G(s)=\dfrac{k_{\text{st}}{\omega_{n}}^{2}}{s^{2}+2\zeta\omega_{n}s+{\omega_{n}}^{2}}=\dfrac{k_{\text{st}}{\omega_{n}}^{2}}{(s+\zeta\omega_{n})^{2}+(1-\zeta ^{2}){\omega_{n}}^{2}}$$
עם הקטבים ב
$$s=-\zeta\omega_{n}\pm j\sqrt{ 1-\zeta ^{2} }\omega_{n}:=-\lambda_{r}\pm j\lambda_{i}$$
כאשר $\lambda_{r}$ ו-$\lambda_{i}$ הם הערכים בערך מוחלט של החלקים הממשיים והמדומים של הקטבים. נשים לב ש:
$$\dfrac{\lambda_{r}}{\lambda_{i}}=\dfrac{\zeta}{\sqrt{ 1-\zeta ^{2} }}\qquad \text{and}\qquad {{\lambda_{r}}^{2}+{\lambda_{i}}^{2}}={\omega_{n}}^{2}$$
כלומר:
- היחס בין החלקים הממשיים והמדומים של הקוטב תלוי רק ב-$\zeta$.
- הערך המוחלט של הקוטב תלוי אך ורק ב-$\omega_{n}$.

![[Screenshot_20241201_134343_Samsung Notes 1.jpg|bookhue|500]]
>תגובת מדרגה של מערכת מסדר שני תת-מרוסנת. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

נראה כי:
 - ככל שהיחס $\dfrac{\lambda_{r}}{\lambda_{i}}$ יותר קטן, כך התגובת יתר (overshoot) יותר נמוכה.
 - המהירות של התגובה פרופורציונלית לערך המוחלט של הקטבים.
 
## רמות תגובות יתר ותדירות טבעית
מהגרף של תגובת מדרגה של מערכת מסדר שני לעיל אנו רואים שעבור יחס $\dfrac{\lambda_{r}}{\lambda_{i}}$ קבוע התגובת יתר קבועה, כך שנוכל לשרטט על המישור המרוכב קווים המתארים תגובות יתר קבועות:
![[Screenshot_20241201_135137_Samsung Notes.jpg|bookhue|250]]
>קווים רדיאליים של תגובות יתר קבועות. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

אם נרצה לדרוש תגובה יתר מקסימלית $\text{OS}^{*}\in (0\%,\,100\%)$ כלשהית, נוכל לשרטט על המישור את כל האזור שמקיים $\text{OS}<\text{OS}^{*}$:
![[Screenshot_20241201_135457_Samsung Notes 1.jpg|bookhue|250]]
>האזור במישור המרוכב עבורו הקטבים יקיימו $\text{OS}<\text{OS}^{*}$. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

>[!notes] הערה: 
 >רמת המקדם ריסון $\zeta=\text{const}$ הם אותם קווים רידאליים.
 
נשים לב גם שתדירות טבעית $\omega_{n}$ קבועה ניתנת לתיאור כחצאי מעגלים במישור המרוכב - $\omega_{n}={\lambda_{r}}^{2}+{\lambda_{i}}^{2}=\text{const}$. אם נרצה לדרוש תדירות טבעית כלשהית $\omega_{n}^{*}>0$, נוכל לשרטט על המישור את כל האזור בהם הקטבים מקיימים $\omega_{n}>{\omega_{n}}^{*}$:
![[Screenshot_20241201_140401_Samsung Notes.jpg|bookhue]]
>האזור במישור המרוכב עבורו הקטבים יקיימו $\omega_{n}>\omega_{n}^{*}$. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

כעת, כדי לדרוש תגובה מעבר שהיא גם יחסית מהירה ($\omega_{n}>\omega_{n}^{*}$) וגם לא תנודתית מדי ($\text{OS}<\text{OS}^{*}$), נצטרך לדרוש שהקטבים שלנו יתמקמו בשני האזורים לעיל:
![[Screenshot_20241201_140639_Samsung Notes.jpg|bookhue|250]]
>האזור בו כל הקטבים ממקומים כדי ליצור תגובות מדרגה "מהירות מספיק" ו"חלקות מספיק". [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].


## השפעה של קוטב נוסף ואפס נוסף
יהי
$$G_{\tau}(s)=\dfrac{k_{\text{st}}{\omega_{n}}^{2}}{(s^{2}+2\zeta\omega_{n}s+{\omega_{n}}^{2})((\beta/\omega_{n})s+1)}$$
עבור $\beta>0$. ניתן לחשוב על מערכת זו כחיבור בטור של מערכת מסדר ראשון ומערכת מסדר שני:
![[Screenshot_20241201_141235_Samsung Notes.jpg|bookhue|500]]

ניתן לחשוב על התגובה של $G_{\tau}$ כהתגובה למערכת מסדר שני לקלט "מדרגה חלקה". לכן נצפה שהתגובה תהיה איטית וחלקה יותר.
![[Screenshot_20241201_142258_Samsung Notes.jpg|bookhue|500]]
>התגובה של $G_{\tau}$ עבור ערכים שונים של $\beta$, כאשר $\beta=0$ שקול למערכת מסדר שני. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

נשים לב שככל ש-$\beta$ גדל (ולפיכך גם $\tau=\beta /\omega_{n}$ גדל):
- התגובת יתר $\text{OS}$ קטנה.
- הזמן עלייה (raise time) עולה.

נביט כעת בהשפעה של אפס נוסף על המערכת. יהי:
$$G_{\alpha}(s)=\dfrac{k_{\text{st}}{\omega_{n}}^{2}((\alpha /\omega_{n})s+1)}{s^{2}+2\zeta\omega_{n}s+{\omega_{n}}^{2}}$$
עבור $\alpha \in \mathbb{R}$. לא נתעמק יותר מדי במה קורה פה, מספיק שנדע שאם המערכת מסדר שני המוחבאת כאן היא תת-מרוסנת:
![[Screenshot_20241201_143229_Samsung Notes.jpg|bookhue]]
>תגובת מדרגה ל-$G_{\tau}$ עבור ערכים שונים של $\alpha$, כאשר המערכת מסדר שני הבסיסית היא תת-מרוסנת. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

ככל ש-$\lvert \alpha \rvert$ גדל:
- התגובת יתר $\text{OS}$ גדלה.
- התגובת חסר (undershoot) $\text{US}$ גדלה.
- הזמן עלייה $t_{r}$ קטן.
- הזמן רגיעה $t_{s}$ גדל.

במידה והמערכת מסדר שני הבסיסית מרוסנת-יתר:
![[Screenshot_20241201_144156_Samsung Notes 1.jpg|bookhue]]
>תגובת מדרגה ל-$G_{\tau}$ עבור ערכים שונים של $\alpha$, כאשר המערכת מסדר שני הבסיסית היא מרוסנת-יתר. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

ככל ש-$\lvert \alpha \rvert$ גדל:
- התגובת יתר $\text{OS}$ גדלה, במידה ו- $\alpha>\zeta+\sqrt{ \zeta ^{2}-1 }$.
- התגובת חסר $\text{US}$ גדלה, במידה ו- $\alpha<0$.
- הזמן עלייה $t_{r}$ קטן.

ראינו כעת שבעוד ניתוח מודלי עובד טוב למערכות מסדר ראשון ושני, הוא כושל במקרים בהם מוסיפים למערכות אלו קטבים ואפסים נוספים. למשל, עלולה להיות לנו תגובת יתר למערכות רק עם אפסים/קטבים ממשיים.

אבל, במקרים מסוימים, נוכל להרחיב את הניתוח המודלי למערכת מסדר גבוה יותר אם ה**דינמיקה הדומיננטית** של המערכת היא מסדר נמוך.

## דינמיקה דומיננטית
>[!def] הגדרה: אפס/קוטב דומיננטי
>נאמר שקבוצה של אפסים/קטבים הם **דומיננטיים** אם אחת מהטענות הבאות תקיפות:
>- כלל האפסים/קטבים האחרים רחוקים בלפחות פי $5$ מהציר המדומה $j\omega$.
>- האפסים/קטבים הקרובים "כמעט מבטלים" אחד את השני.

![[Screenshot_20241201_145427_Samsung Notes.jpg|bookhue]]
>קטבים ואפסים (בכחול) שנחשבים לא דומיננטיים. קוטב מסומן ב-$\times$, אפס מסומן ב-$\circ$. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

>[!example] דוגמה: 
> לכל $\alpha>0$, נגדיר:
> $${G}_{1}(s)=\dfrac{8}{s+1}\cdot \dfrac{s/8+1}{s^{2}/\alpha+12s/\alpha+1}$$
> הקטבים הם $s=-1,\,-6\pm\sqrt{ 36-\alpha }$ ויש אפס יחיד ב-$s=-8$. נשווה למערכת מסדר נמוך:
> $${G}_{2}(s)=\dfrac{8}{s+1}$$
> ![[Screenshot_20241201_150531_Samsung Notes.jpg|bookhue]]
> >השוואה של התגובות מדרגה של המערכת ממעלה שלישית ${G}_{1}$ ומערכת ממעלה ראשונה ${G}_{2}$. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].


# ניתוח תגובת תדירות
עוד דרך לאפיין מערכות היא בעזרת **ניתוח תגובת תדירות (frequency-response analysis)**. נביט למשל בגרף גודל (magnitude) של מערכת מסדר ראשון
$$G(s)=\dfrac{1}{\tau s+1}$$

![[Screenshot_20241201_151130_Samsung Notes 1.jpg|bookhue|500]]
>גרף גודל (magnitude) של $G(s)$. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

נשים לב ש:
- ככל ש-$\tau$ קטן, הרוחב-פס (bandwidth) $\omega_{b}$ מתרחב ([[LSY1_009 Frequency Domain Analysis#Filters|תזכורת לפילטרים]]).

אם נביט בתגובת תדירות ומדרגה שלו:

![[Screenshot_20241201_151533_Samsung Notes.jpg|bookhue]]
>תגובת תדירות ומדרגה של $G(s)$ עבור $\tau$ שונים. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

נסיק ש:
- עבור רוחב-פס רחב יותר אנו מקבלים זמן עלייה קצר יותר - תגובת מעבר מהירה יותר.

מבחינת מערכת מסדר שני:
$$G(s)=\dfrac{{\omega_{n}}^{2}}{s^{2}+2\zeta\omega_{n}s+{\omega_{n}}^{2}}$$
הגרף בודה שלו:
![[{C7369056-992D-4ADA-91CC-1E03B993E28E}.png|bookhue|500]]
>גרף גודל (magnitude) של $G(s)$. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

נשים לב שהרוחב-פס $\omega_{b}$:
- גדל כאשר $\omega_{n}$ גדל (והתגובת מדרגה הופכת להיות מהירה יותר).
- גודל מעט כאשר $\zeta$ יורדת (והתגובת מדרגה הופכת להיות מהירה יותר).
פסגת התהודה (resonant peak):
- גדל כאשר $\zeta$ קטנה (והתגובת מדרגה יותר רַעְדָנִית, shaky).

אם נביט בתגובת תדירות ומדרגה שלו עבור $\zeta$ קבוע ו-$\omega_{n}$ משתנה:
![[{7DDFEA94-812A-46BB-91F0-9BC003121C5E}.png|bookhue]]
>תגובת תדירות ומדרגה של $G(s)$ עבור $\zeta=1$ ו- $\omega_{n}\in \{ 0.25,1,4 \}$. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

מה שמראה ש:
- רוחב-פס $\omega_{b}$ רחב יותר מניב זמן עלייה $t_{r}$ קצר יותר (מעבר מהיר יותר).

עבור $\zeta$ משתנה ו-$\omega_{n}$ קבוע:
![[{24857EA3-02F7-44BE-ACCB-6CC0A1EF3FB5}.png|bookhue]]
>תגובת תדירות ומדרגה של $G(s)$ עבור $\zeta \in \{ 0.5,1/3,0.2 \}$ ו- $\omega_{n}=1$. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

מה שמראה ש:
- תהודה $M_{r}$ גדולה יותר גורמת לתגובת יתר $\text{OS}$ גדולה יותר.

אחד מהיתרונות של ניתוח תגובת תדירות הוא שאת הכללי אצבע שעובדים עבור מערכות מסדר ראשון ושני ניתן גם להרחיב למערכות כלליות. למשל, אם:
$$G(s)=\dfrac{\alpha\omega_{n}s+{\omega_{n}}^{2}}{(s/2+1)(s^{2}+2\zeta\omega_{n}s+{\omega_{n}}^{2})}$$
ואז עם $\zeta$ ו-$\omega_{n}$ קבועים, ו-$\alpha$ משתנה:
![[{8D20AA8D-6F40-4407-819D-843474758940}.png|bookhue]]
>תגובת תדירות ומדרגה של $G(s)$ עבור $\zeta=1,\,\omega_{n}=1$ ו-$\alpha \in \{ 2,3,5 \}$. [[ICT1_000 00340040 מבוא לבקרה#ביבליוגרפיה|(Leonid Mirkin’s Homepage, n.d.)]].

וגם כאן:
- רוחב-פס $\omega_{b}$ רחב יותר מניב זמן עלייה $t_{r}$ קצר יותר (מעבר מהיר יותר).
- תהודה $M_{r}$ גדולה יותר גורמת לתגובת יתר $\text{OS}$ גדולה יותר.

בכללי נוכל לומר ש:
>[!notes] טיפים: 
> - ככל ש-$M_{r}$ גדול יותר, התגובות יתר וחסר יהיו גדולים יותר.
> - בדרך כלל:
> 	- פסגות צרות יותר מעידות על תגובה תנודתית עם תדירויות הקרובות לתדירויות של הפסגה בדיאגרמת גודל בבודה.
> 	- פסגות רחבות יותר מעידות על תגובת יתר או חסר ללא תנודות.
> - רוחב-פס $\omega_{b}$ רחב יותר מניב זמן עלייה $t_{r}$ קצר יותר (מעבר מהיר יותר).


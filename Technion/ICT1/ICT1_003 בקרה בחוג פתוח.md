---
aliases:
  - יציבות פנימית
  - היפוך תהליך
  - בקרה בחוג פתוח
  - צמצום קטבים
---
# מבוא
מערכת בקרה מוגדרת כהחִבְרוּר (interconnection) של מרכיבים שונים כדי ליצור מערכת שתניב תגובה *רצויה* כלשהי. מכיוון שתגובה זו ידועה (אנו יודעים איזה תגובה אנו רוצים שתהיה למערכת) ובעולם האמיתי המערכת לא תצליח לפלוט בדיוק את התגובה הרצויה, אנו מגדירים אות שגיאה בין האות הרצוי לאות האמיתי. השימוש באות שגיאה זה לרוב מוכנס בחזרה למערכת, מה שיוצר רצף פעולות בחוג סגור הנקראת **מערכת משוב**.
![[{52394552-E4DF-4330-AF1C-9CE1EAA1DDBC}.png|bookhue|350]]
>מערכת בחוג סגור.

זהו למעשה המקרה של מערכות בטבע כמו מערכות ביולוגיות או פיזיולוגיות. למשל, הדופק בגוף האדם הוא דוגמה למערכת משוב השומרת על דופק רצוי מסוים.

**מערכת בחוּג פָּתוּחַ**, או מערכת ללא משוב, מתוארת באיור הבא:
![[{8E948509-EEBB-47CC-9F2B-5B3784D6A458}.png|bookhue|]]
>דיאגרמת בלוקים של מערכת בחוג פתוח עם אות הפרעה $T_{d}(s)$.

האות הפרעה, $T_{d}(s)$ משפיע ישירות על הפלט, $Y(s)$. ללא משוב, המערכת בקרה מאוד רגישה להפרעות, לשינויים ב-$G(s)$, והמידע שיש לנו על $G(s)$.
אם המערכת בחוג פתוח לא מניבה תגובה רצויה, נוכל להכניס בקר בטור, $G_{{c}}(s)$ לפני התהליך $G(s)$, ונתכנן את הפונקציית תמסורת $G_{{c}}(s)G(s)$ כך שהפונקציית תמסורת הכללית תיתן את התגובה הרצויה. לשיטת בקרה זו קוראים **בַּקָּרָה בְּחוּג פָּתוּחַ**.
![[{688EE2E0-07AC-4840-9C36-A90BC3858EAB}.png|bookhue]]
>דיאגרמת בלוקים של מערכת בקרה בחוג פתוח (ללא משוב).

>[!notes] הערה: 
 >בדפי הרצאות של ליאוניד אנו משתמשים בסימון $P$ עבור $G$ (plant, process), ו-$C_{\text{ol}}$ עבור $G_{c}$ (open-loop controller):
 >![[{F9DF3806-6FD9-47DE-91C1-E7156FFDD7F1}.png|bookhue|450]]
 >בסימונים אלו, גם:
 >- האות $u$ הוא הקלט.
 >- האות $y$ הוא הפלט (המבוקר).
 >- האות $r$ הוא הפלט הרצוי (reference trajectory).
 
המטרה שלנו היא למצוא $u$ כך ש- $y=r$ עבור אות נתון $r$.

נתחיל מדוגמאות:
>[!example] דוגמה: מערכת מסה-גלגלת פשוטה
> נביט בדוגמה הבאה של מערכת מסה-גלגלת:
> ![[{F47F8490-D0F1-4A79-92E8-6A551A65D86E}.png|bookhue|200]]
> >מערכת מסה-גלגלת פשוטה, עם $\theta$ כקלט, ו-$y$ כפלט.
> 
> כיוון שהגלגלת ברדיוס $\rho$, מספיק לנו להכפיל את הקלט ב-$\rho$ כדי לקבל את $y$, ולכן המערכת מתוארת ע"י:
> ![[{524661E8-BC8C-4D11-902E-183E74B11981}.png|bookhue|250]]
> 
> כדי למצוא $u$ כך ש- $y=r$ עבור $r$ נתון, נוכל פשוט לדרוש ש
> $$u=\dfrac{1}{\rho}r$$
> כלומר:
> ![[{D416E2B7-59E2-4DA6-8DD8-4C9A83FFD4E8}.png|bookhue|400]]
> 
> למשל, בהינתן ו- $\rho=\pu{1.25m}$, והקלט הרצוי $r$ הוא:
> ![[{4325A0E9-061B-4BAF-B8A2-90E163B31215}.png|bookhue|250]]
> 
> נדרוש ש- $u=0.8r$, ונקבל שקיבלנו את $y$ הרצוי (כלומר, זהה ל-$r$):
> ![[{8C6A184E-8821-43F3-9CEB-9709E31114D0}.png|bookhue|450]]
> 

במקרה של מערכת יותר מסובכת, יהיה לנו טיפה יותר קשה "לנחש" את $C_{\text{ol}}$. למשל, במערכת מסה-גלגלת הבאה:

>[!example] דוגמה: מערכת מסה-גלגלת עם ריסון וקפיץ
> ![[{E08B23F2-66CC-46F2-84D5-9EB8ABAFC158}.png|bookhue|200]]
> >מערכת מסה-גלגלת עם ריסון וקפיץ, עם $\theta$ כקלט, ו-$y$ כפלט.
> 
> נוכל לתאר את מערכת זו ע"י:
> ![[{FC78402F-A41E-4067-B636-652EE4644FAF}.png|bookhue|300]]
> לכן, כדי למצוא $u$ כך ש- $y=r$, נדרוש:
> ![[{D84D1746-A5A9-4211-8422-D3935DE86D59}.png|bookhue|500]]

בקרים מהסוגים שרואים בדוגמאות לעיל פועלים לפי אותו עיקרון:
![[{A1A65720-5803-4A78-9A52-D08948BFCD9F}.png|bookhue|400]]
כלומר, הבקר:
$$C_{\text{ol}}=P^{-1}$$
לשיטה זו קוראים **היפוך תהליך**, ולמרות שהיא נדמית פשוטה, היא מאוד מוגבלת ביישומים שלה. בכל זאת, היא מהווה בסיס לרוב שיטות הבקרה.

# מגבלות ההיפוך תהליך

## אי ודאות במודל

נזכור כי המודלים שלנו על תהליכים מציאותיים אף פעם לא מושלמים. לכן, ה-$P$ ב-$C_{\text{ol}}=P^{-1}$ הוא לא התהליך האמיתי, אלא שיעור שלו, והמערכת בקרה האמיתית שבנינו היא בכלל:
![[{26A1AC86-3929-46E5-8878-08C142032497}.png|bookhue|400]]
עבור תהליך "אמיתי" $P_{\text{true}}$ כלשהו. כעת, מתקיים:
$$y=P_{\text{true}}P^{-1}r$$
כך ש- $y\neq r$ כאשר $P_{\text{true}}\neq P$, עם השגיאה:
$$\begin{gathered}
e :=r-y \\[1ex]
e =r-P_{\text{true}}P^{-1}r \\[1ex]
\boxed {
 e=(1-P_{\text{true}}P^{-1})r
 }
\end{gathered}$$

> [!example] דוגמה: מערכת מסה-גלגלת עם ריסון וקפיץ
> במקרה של המערכת מסה-גלגלת עם ריסון וקפיץ טעינו במסה אנו נקבל:
> ![[{06B111C3-016D-4D4A-B955-27FE5BB6D469}.png|bookhue]]
> >גרפים של הקלט $u(t)$ מימין והפלט האמיתי $y(t)$ משמאל. הקו המקווקו הוא הקלט/הפלט הדרוש. הגרף הכחול מתאר מערכת בקרה שהוזן לה $m=\pu{1410kg}$, בעוד המסה האמיתית היא $m=\pu{2820kg}$. הגרף האדום מתאר מערכת בקרה שהוזן לה $\pu{2820kg}$, בעוד המסה האמיתית היא $m=\pu{1410kg}$. הנתונים האחרים של המערכת הם $\rho=\pu{1.25m},\,k=\pu{40kN.s/m},\,c=\pu{800N/m}$.
> 
> ניתן גם לעשות ניסוי מחשבתי על המערכת הזו: במידה ואנו רוצים להעלות את המסה באופן שמתואר בקו המקווקו באיור לעיל (עד לגובה $\pu{1m}$), נדמיין את עצמנו מסובבים את הגלגלת בסך הכל $\dfrac{\pu{1m}}{\rho}$ רדיאנים. כדי להתאים את עצמי לגרף $y(t)$ הדרוש (מבחינת מהירות, תאוצה וכו'), אסובב את הגלגלת גם כמעט באותו האופן. אם התחשבתי נכון בקפיץ ובריסון (כך שאני צריך להתחשב נכון גם במסה), אצליח לקבל את העקומה $y$ הדרושה ממני. אבל, אם למשל הנחתי שהמסה הרבה יותר קלה מהמציאות, אני עלול לסובב את הגלגלת לאט מדי בהתחלה ומהר מדי בסוף, מה שיוביל לתנודות גדולות של המסה - לא כנדרש בגרף של $y$. טעות כזו מתוארת ע"י הגרף הכחול לעיל.
> 

## הפרעות
דרכים אחרות בהם הבקר היפוך עלול להיכשל בהם הוא במקרה של *הפרעות*. נוכל למדל את הפרעות אלו כאות הפרעה $d$ המשפיע על המערכת:
![[{51CA51B1-E361-4518-A5CF-357347BF4DD7}.png|bookhue|450]]

במקרה זה:
$$y=P(P^{-1}r+d)=r+Pd$$
ואז השגיאה שלנו היא:
$$\begin{gathered}
e=r-y \\[1ex]
\boxed {
e=-Pd
 }
\end{gathered}$$

>[!example] דוגמה: מערכת מסה-גלגלת עם ריסון וקפיץ
> נביט בהשפעה של כוח חיצוני $f$ למערכת מסה-גלגלת עם ריסון וקפיץ.
> ![[{BFD534A7-1A30-40ED-A0D9-3F0FAF99B53B}.png|bookhue|200]]
> 
> נוכל פשוט להוסיף את $f$ לדיאגרמה באופן הבא:
> ![[{2B127157-D59F-491E-A63B-6A3E7B7F1AD5}.png|bookhue|500]]
> במידה ו-
> $$f=\pu {-250g }(\mathbb{S}_{-0.74}\mathbb{1}-\mathbb{S}_{-1.92}\mathbb{1})$$
> שהוא בעצם הפונקציה:
> ![[{ADDBDDE2-83F1-4DA7-8BB3-D13286DC9560}.png|bookhue|200]]
> התגובות יהיו:
> ![[{C23E9075-6390-4274-8177-94458E3591F5}.png|bookhue]]
> >גרפים של הקלט $u(t)$ מימין והפלט האמיתי $y(t)$ משמאל. הקו המקווקו הוא הקלט/הפלט הדרוש. הגרף הכחול מתאר מערכת בה $m=\pu{1410kg}$, בעוד הגרף האדום מתאר מערכת בה $m=\pu{2820kg}$. הנתונים האחרים של המערכת הם $\rho=\pu{1.25m},\,k=\pu{40kN.s/m},\,c=\pu{800N/m}$.

# יציבות פנימית
## צמצום קטבים
>[!def] הגדרה: צמצום
 >בהינתן חיבור בטור כמתואר בתרשים הבא:
 >![[{A4998CB4-8494-4741-B01F-893521EB6C83}.png|bookhue|300]]
 >אנו אומרים שישנו **צמצום** בטור אם סדר ההעתקה $u\to y$ קטן יותר מסכום הסדרים של חלקיו, ${G}_{1}$ ו-${G}_{2}$.
 
 פשר המשמעות של צמצום הוא שחלק מהדינמיקה של החלקים פשוט נעלמת מההעתקה $u\to y$. אם הדינמיקה שנעלמת היא לא יציבה, כלומר הקטבים שלה ב- $\bar{\mathbb{C}}_{0}$, אנו אומרים שה*צמצום לא יציב*. במקרים של SISO (single-input single-output), הקטבים של חלק אחד יכולים להתבטל רק ע"י האפסים של האחר, ולכן לרוב נשתמש במונח **צמצום קטבים/אפסים**.

>[!example] דוגמה: 
>יהי:
>$${G}_{1}(s)=\dfrac{1}{s-a},\, \qquad {G}_{2}(s)=\dfrac{s-a}{s+1}$$
>לכן:
>$${G}_{2}(s){G}_{1}(s)=\dfrac{1}{s+1}$$
>כלומר, הקוטב של ${G}_{2}(s)$ ב-$a$ מצומצם ע"י האפס של ${G}_{2}(s)$. זהו צמצום לא יציב אם $a\geq 0$.

## יציבות פנימית של מערכות מחובררות
נביט בבקר בחוג פתוח הבא:
![[{A818B90D-5146-49B1-89C7-3CFBE15A19DA}.png|bookhue|450]]

נוכל להציג את ההעתקה בין הקלט $r$ ו-$d$ לפלט $y$ ו-$u$ באופן מטריצי:
$$\begin{pmatrix}
y \\
u
\end{pmatrix}=\begin{pmatrix}
PC_{\text{ol}} & P \\
C_{\text{ol}} & 0
\end{pmatrix}\begin{pmatrix}
r \\
d
\end{pmatrix}$$
>[!def] הגדרה: יציבות פנימית
 >נאמר שהבקר בחוג פתוח הוא **יציב פנימית** אם $P,\,C_{\text{ol}},\,PC_{\text{ol}}$ יציבים.
 >כיוון שהיציבות של $P$ ו-$C_{\text{ol}}$ גוררת יציבות של $PC_{\text{ol}}$, נסיק כי המערכת יציבה פנימית אמ"ם גם $P$ וגם $C_{\text{ol}}$ הם יציבים.

נשים לב שאם ישנו צמצום לא יציב בין $C_{\text{ol}}$ ו-$P$ אז הבקר לא יציב פנימית.

## השלכות על בקר בחוג פתוח

ככלל, התנאים לאפשרות לבקרה באמצעות הפיכת תהליך הם אם התהליך $P$:
1. יציב [[LSY1_003 Classification of Systems#Stable and Unstable Systems|BIBO]].
2. ללא אפסים ב-RHP ($\bar{\mathbb{C}}_{0}$).
3. התהליך הוא strictly proper.
# תרגילים

## תרגיל 1
הביטו בתהליכים הבאים המבוקרים בחוג פתוח:
1. $P(s)=\dfrac{1}{s+1}$
2. $P(s)=\dfrac{s-2}{s+1}$
3. $P(s)=\dfrac{s+2}{s-1}$

האם תהליכים אלו ניתנים לבקרה ע"י הבקר $C_{\text{ol}}=P^{-1}$?

**פתרון**:
1. התהליך $P(s)$ הוא יציב (הוא proper וכל הקטבים שלו במישור השמאלי). הפונקציית תמסורת של הבקר היא:
	$$C_{\text{ol}}(s)=\dfrac{1}{P(s)}=s+1$$
	פונקציית תמסורת זו היא non-proper. במישור הזמן, הוא קובע כי:
$$u(t)=\dot{r}(t)+r(t)$$
	כלומר, הוא ניתן ליישום רק אם אנו יכולים למדוד את $r$ וגם את $\dot{r}$, וגם אם $\lvert \dot{r} \rvert$ חסום.
2. התהליך $P(s)$ יציב. הפונקציית תמסורת של הבקר:
	$$C_{\text{ol}}(s)=\dfrac{1}{P(s)}=\dfrac{s+1}{s-2}$$
	הבקר הוא proper אבל יש לו קוטב חיובי, כך שהוא לא יציב, והוא ידרוש קלט לא חסום $u$ - אין יציבות פנימית.
3. התהליך $P(s)$ לא יציב. הפונקציית תמסורת של הבקר:
$$C_{\text{ol}}=\dfrac{1}{P(s)}=\dfrac{s-1}{s+2}$$
	בכלל המערכת אנו מצמצים את הקוטב $s=1$ של $P(s)$, שהוא קוטב לא יציב, מה שיכל לגרום להתבדרות במקרה של הפרעה קטנה - אין יציבות פנימית.

## תרגיל 2
האיור הבא מתאר רכב במסה $\pu{1000kg}$ הנוסע במעלה מדרון עם זווית $\theta=12^{\circ}$. הכוח המניע $f$ הנוצר ע"י המנוע הוא האות המבוקר, שמטרתו הוא לשמור על מהירות המכונית ברמה מסוימת. לכוח ההתנגדות שלושה חלקים: הכוח כתוצאה מהכבידה, $f_{g}=mg\sin\theta$; כוח הגרר $f_{a}$; ו-$f_{r}$ הכוחות כתוצאה מחיכוך הגלגול. בהנחה והמהירות של המכונית תמיד חיובית, ההתנגדות לגלגול היא $f_{r}=mgc_{r}\cos\theta$, כאשר מקדם ההתנגדות לגלגול הוא $c_{r}=0.01$. כוח הגרר פרופורציונלי למהירות בריבוע, כלומר $f_{a}=\dfrac{1}{2}\alpha v^{2}$, כאשר $\alpha\approx \pu{1kg/m}$ הוא קבוע שתלוי בצפיפות האוויר, שטח הפנים הקדמי של המכונית, ומקדם גרר התלוי בצורה של המכונית.
![[{0C491756-D311-44F6-97FD-0CFB101BE22F}.png|bookhue|500]]
>המערכת הנתונה על הרכב.

### סעיף א'
מצאו את משוואות התנועה של המערכת ובצעו עליו לינאריזציה סביב נקודת שיווי המשקל:
$$v_{\text{eq}}=\pu{80km/h}\approx \pu {22.22 m/s}$$
סמנו את הקלט והפלט ע"י $u$ ו-$y$ בהתאמה.

**פתרון**:
מ[[PHY1_003 חוקי ניוטון#חוק ניוטון השני|חוק שני של ניוטון]]:
$$\begin{gathered}
m\dot{v}(t)=f(t)-f_{r}(t)-f_{g}(t)-f_{a}(t) \\[1ex]
m\dot{v}(t)=f(t)-\dfrac{1}{2}\alpha v^{2}(t)-mg\sin\theta-mgc_{r}\cos\theta
\end{gathered}$$
זהו מד"ר מסדר ראשון, כך שנבחר את המצב של המערכת כ- $x(t)=v(t)$. לכן, משוואת המצב היא:
$$\dot{x}(t)=\dfrac{1}{m}f(t)-\dfrac{1}{2m}\alpha x^{2}(t)-g(\sin\theta+c_{r}\cos\theta)$$
נסמן את הצד הימני של המשוואה ב- $\phi(x,f)$. לכן:
$$\dot{x}(t)=\phi(x,f)$$
נקודות שיווי המשקל $x_{\text{eq}}$ צריכות לקיים $\phi(x_{\text{eq}},f_{\text{eq}})=0$. נקבל ש:
$$f_{\text{eq}}=\dfrac{1}{2}\alpha {{v}_{\text{eq}}}^{2}+mg(\sin\theta+c_{r}\cos\theta)$$
לכן, ישנו $f_{\text{eq}}$ מיוחד עבור כל $v_{\text{eq}}$. נזכור שנתון לנו $v_{\text{eq}}$ מסוים, אז נניח ואנו מתייחסים אליו מעכשיו.
נרצה לבצע לינאריזציה למערכת. הפרמטרים:
$$\begin{aligned}
 & A=\dfrac{ \partial \phi }{ \partial v } \bigg|_{\substack{v=v_{\text{eq}}\\f=f_{\text{eq}}}}^{}=-\dfrac{\alpha v_{\text{eq}}}{m} \\[1ex]
 & B=\dfrac{ \partial \phi }{ \partial f } \bigg|_{\substack{v=v_{\text{eq}}\\f=f_{\text{eq}}}}^{}=\dfrac{1}{m}
\end{aligned}$$
לכן משוואת המצב לאחר לינאריזציה:
$$\begin{cases}
\dot{\tilde{x}}=-\dfrac{\alpha v_{\text{eq}}}{m}\tilde{x}(t)+\dfrac{1}{m}u(t) \\[1ex]
y(t)=\tilde{x}(t)
\end{cases}\qquad \iff \begin{cases}
ms\tilde{X}(s)=-\alpha v_{\text{eq}}\tilde{X}(s)+U(s) \\[1ex]
Y(s)=\tilde{X}(s)
\end{cases}$$
כאשר:
$$\tilde{x}:=x-v_{\text{eq}},\, \qquad u:=f-f_{\text{eq}},\, \qquad y:=v-v_{\text{eq}}$$
הפונקציית תמסורת של המערכת $u\to y$ היא:
$$P(s)=\dfrac{1}{ms+\alpha v_{\text{eq}}}$$
זוהי מערכת מסדר ראשון, עם קבוע זמן $\tau=m/(\alpha v_{\text{eq}})$ שתלוי במהירות שיווי משקל. למעשה, כיוון ש-$\tau$ קטן כאשר $v_{\text{eq}}$ גדל, המערכת מגיבה יותר מהר במהירויות גבוהות יותר.

### סעיף ב'
יהי בקר מחוג פתוח בו הבקר $C_{\text{ol}}$ יוצר אות מבוקר $u$ מאות מהירות $r_{v}$. ציירו את הדיאגרמת בלוקים של מערכת זו. תכננו את $C_{\text{ol}}$ ע"י היפוך תהליך. מתי בקר זה ניתן ליישום? חשבו את התגובה של המערכת הלינארית אם:
$$r_{v}(t)=\begin{cases}
0 & t\leq  0 \\
a_{\max_{}}t & 0\leq  t\leq  y_{\text{new}}/a_{\text{max}} \\
y_{\text{new}} & t\geq  y_{\text{new}}/a_{\text{max}}
\end{cases}$$
![[{D7553633-CEFD-4437-B6B4-4775CBC11C13}.png|bookhue|300]]
>האות $r_{v}(t)$ הנתון.

כאשר $a_{\max_{}}=\pu{0.5m/s^{2}}$ ו-$y_{\text{new}}=\pu{10km/h}\approx \pu{2.78m/s}$.

**פתרון**:
![[{F9DF3806-6FD9-47DE-91C1-E7156FFDD7F1}.png|bookhue|400]]
>מערכת בקר בחוג פתוח.

הפיכת תהליך:
$$C_{\text{ol}}(s)=\dfrac{1}{P(s)}=ms+\alpha v_{\text{eq}}$$
נשים לב שזהו בקר non-proper. במידה ולא היינו יודעים מהו האות ייחוס $r$, לא היינו יודעים להשתמש בבקר זה כי אני לא יודעים בהכרח את העתיד של אות זה (לא יודעים את $\dot{r}$). אבל, במקרה זה $r$ נתון לנו, ולכן כן נוכל ליישם את בקר זה.

מאחר ו- $C_{\text{ol}}=\dfrac{U(s)}{R_{v}(s)}$:
$$u(t)=m\dot{r}_{v}(t)+\alpha v_{\text{eq}}r_{v}(t)$$
כאשר נציב את $r_{v}(t)$ הנתון, נקבל שהאות $u(t)$:
![[{F2B41049-58BD-4498-977C-E96A265F729B}.png|bookhue|400]]
>האות $u(t)$.

### סעיף ג'
הניחו שלמדרון יש שיפוע טיפה שונה מהשיפוע שאיתו מידלנו את המערכת והבקר - נניח שהוא $\bar{\theta}=13^{\circ}$. רשמו את משוואת התנועה החדשה במקרה זה וחשבו את התגובה הלינארית ל-$r_{v}(t)$ מסעיף קודם.

**פתרון**:
מבחינת משוואת התנועה של המערכת, לא הרבה השתנה חוץ מהחלפת $\theta$ ב-$\bar{\theta}$:
$$\dot{x}(t)=\dfrac{1}{m}f(t)-\dfrac{1}{2m}\alpha x^{2}(t)-g(\sin\bar{\theta}+c_{r}\cos\bar{\theta})$$
בנוסף, $P(s)$ לא תלוי ב-$\theta$ ולכן הוא לא השתנה.
השיווי משקל כעת הוא:
$$\bar{f}_{\text{eq}}=\dfrac{1}{2}\alpha {{v}_{\text{eq}}}^{2}+mg(\sin\bar{\theta}+c_{r}\cos\bar{\theta})$$
אבל, לא שינינו את הכניסה $f(t)$. נשים לב שמהגדרת $u(t)$ מתקיים $f(t)=u(t)+f_{\text{eq}}$, ולכן התגובה החדשה $\bar{u}(t)$:
$$\begin{aligned}
\bar{u}(t) & =f(t)-\bar{f}_{\text{eq}} \\[1ex]
 & = u(t)+f_{\text{eq}}-\bar{f}_{\text{eq}} \\[1ex]
 & = u(t)+mg[\sin\theta-\sin\bar{\theta}+c_{r}(\cos\theta-\cos\bar{\theta})] \\[1ex]
 & =u(t)+2mg\left[ \cos\left( \dfrac{\theta+\bar{\theta}}{2} \right)-c_{r}\sin\left( \dfrac{\theta+\bar{\theta}}{2} \right) \right]\sin\left( \dfrac{\theta-\bar{\theta}}{2} \right)
\end{aligned}$$
סיטואציה זו תואמת לדיאגרמה הבאה במקרה וה"הפרעה" היא:
$$d(t)=d_{\bar{\theta}}:=2mg\left[ \cos\left( \dfrac{\theta+\bar{\theta}}{2} \right)-c_{r}\sin\left( \dfrac{\theta+\bar{\theta}}{2} \right) \right]\sin\left( \dfrac{\theta-\bar{\theta}}{2} \right)=\text{const} $$
![[{C6E0CBAB-4E34-4299-89FB-B55DAA304091}.png|bookhue|500]]
>בקר בחוג פתוח תחת אי-ודאות לגבי שיפוע המסלול.

השגיאה שלנו במצב מתמיד תהיה:
$$e_{\text{ss}}=\lim_{ t \to \infty}r_{v}(t)-y(t)=-\dfrac{1}{\alpha v_{\text{eq}}}d_{\bar{\theta}}\approx \pu{27.06km/h}$$
נוכל לראות את תגובת המכונית בגרף הבא בצבע אדום:
![[{E0ABA942-8783-40EF-972A-F9E08E51F6B0}.png|bookhue|500]]
>תגובות מהירות ל-$r_{v}$ הנתון.

### סעיף ד'
הניחו כעת שהשיפוע הוא השיפוע הצפוי, אבל נוסע ששוקל $\pu{70kg}$ נכנס לרכב, כך שמסת הרכב האמיתית הופכת להיות $\bar{m}=\pu{1070kg}$. מצאו את הדינמיקה החדשה של המערכת והתגובה הלינארית ל-$r_{v}(t)$.

**פתרון**:
כעת, השיווי משקל הוא:
$$\bar{f}_{\text{eq}}=\dfrac{1}{2}\alpha {{v}_{\text{eq}}}^{2}+\bar{m}g(\sin\bar{\theta}+c_{r}\cos\bar{\theta})$$
ולכן:
$$\begin{aligned}
\bar{u}(t) & =f(t)-\bar{f}_{\text{eq}} \\[1ex]
 & = u(t)+f_{\text{eq}}-\bar{f}_{\text{eq}} \\[1ex]
 & = u(t)+g(m-\bar{m})(\sin\theta+c_{r}\cos\theta)
\end{aligned}$$

סיטואציה זו תואמת לדיאגרמה הבאה במקרה וה"הפרעה" היא:
$$d(t)=d_{\bar{m}}:=g(m-\bar{m})(\sin\theta+c_{r}\cos\theta)=\text{const} $$
![[{D86D0A9A-F860-4284-A84F-D542BA018E8A}.png|bookhue|500]]
>בקר בחוג פתוח תחת אי-ודאות לגבי מסת הרכב.

השגיאה שלנו במצב מתמיד תהיה:
$$e_{\text{ss}}=\lim_{ t \to \infty}r_{v}(t)-y(t)=\dfrac{1}{\alpha v_{\text{eq}}}d_{\bar{m}}\approx \pu{24.26km/h}$$
תגובת המכונית מוצגת בגרף הקודם בצבע ירוק.